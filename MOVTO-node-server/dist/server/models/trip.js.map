{"version":3,"sources":["server/models/trip.js"],"names":["debug","require","TripSchema","Schema","driver","_id","type","Types","ObjectId","ref","name","String","default","fname","lname","email","locationId","gpsLoc","Number","index","latitudeDelta","longitudeDelta","profileUrl","activeStatus","Boolean","adminId","stopDurationSource","address","createdAt","Date","toISOString","updatedAt","isDeleted","deletedAt","terminals","timeToNextTerminal","sequenceNo","isSelected","loc","tripRequests","Mixed","shuttleId","transferredTo","tripStartAt","tripEndTime","Array","seatBooked","seatsAvailable","tripIssue","roadMapUrl","passengerIds","visitedTerminalIds","visitedTerminalsCount","toDestination","visitedTerminal","isScheduledTrip","path","validate","driverId","respond","UserSchema","findByIdAsync","then","driverData","statics","list","skip","limit","filter","searchObj","tripStatus","find","sort","select","populate","execAsync","get","tripId","findById","tripObj","err","APIError","httpStatus","NOT_FOUND","reject","getCount","count","updateSeats","query","availableSeats","bookedSeat","console","log","updateAsync","$set","new","mongoose","model"],"mappings":"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","file":"trip.js","sourceRoot":"../../../../.."}