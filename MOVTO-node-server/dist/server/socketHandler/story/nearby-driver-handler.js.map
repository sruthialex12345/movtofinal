{"version":3,"sources":["server/socketHandler/story/nearby-driver-handler.js"],"names":["nearbyDriverHandler","socket","on","userRegion","coordinates","region","latitude","longitude","userId","user","_id","console","log","UserSchema","findOneAndUpdateAsync","$set","mapCoordinates","new","then","findAsync","$and","gpsLoc","$geoWithin","$centerSphere","updatedUser","config","radius","currTripId","currTripState","loginStatus","userType","USER_TYPE_DRIVER","isAvailable","driverArray","length","SocketStore","emitByUserId"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AAFyD;AAIzD,SAASA,mBAAT,CAA6BC,MAA7B,EAAqC;AACnCA,SAAOC,EAAP,CAAU,oBAAV,EAAgC,UAACC,UAAD,EAAgB;AAC9C;AACA;AACA;AACA;AACA;AACA,QAAMC,cAAc,CAACD,WAAWE,MAAX,CAAkBC,QAAnB,EAA6BH,WAAWE,MAAX,CAAkBE,SAA/C,CAApB;AACA;AACA,QAAMC,SAASL,WAAWM,IAAX,CAAgBC,GAA/B;AACAC,YAAQC,GAAR,CAAYJ,MAAZ;AACA;AACA;AACA;AACAK,mBAAWC,qBAAX,CAAiC,EAAEJ,KAAKF,MAAP,EAAjC,EAAkD,EAAEO,MAAM,EAAEC,gBAAgBZ,WAAlB,EAAR,EAAlD,EAA6F,EAAEa,KAAK,IAAP,EAA7F,EACGC,IADH,CACQ;AAAA,aACJL,eAAWM,SAAX,CAAqB;AACnBC,cAAM,CAAC,EAAEC,QAAQ,EAAEC,YAAY,EAAEC,eAAe,CAACC,YAAYR,cAAb,EAA6BS,cAAOC,MAApC,CAAjB,EAAd,EAAV,EAAD,EAA6F,EAAEC,YAAY,IAAd,EAAoBC,eAAe,IAAnC,EAA7F,EAAwI,EAAEC,aAAa,IAAf,EAAxI,EAA+J,EAAEC,UAAUC,2BAAZ,EAA/J,EAA+L,EAAEC,aAAa,IAAf,EAA/L;AADa,OAArB,CADI;AAAA,KADR,EAKGd,IALH,CAKQ,UAACe,WAAD,EAAiB;AACrB,UAAIA,WAAJ,EAAiB;AACftB,gBAAQC,GAAR,CAAYqB,YAAYC,MAAxB,EAAgC,aAAhC;AACAC,8BAAYC,YAAZ,CAAyB5B,MAAzB,EAAiC,mBAAjC,EAAsDyB,WAAtD;AACD;AACF,KAVH;AAWD,GAxBD;AAyBD;;kBAEcjC,mB","file":"nearby-driver-handler.js","sourceRoot":"../../../../../../.."}