{"version":3,"sources":["server/controllers/passenger.js"],"names":["getPassengerIncompleteRides","getCloudinaryDetails","resolve","reject","ServerConfig","findOneAsync","key","then","foundDetails","value","catch","err","addPassenger","req","res","body","userId","passengerDetails","_id","mongoose","Types","ObjectId","User","user","newPassengerList","passengerList","concat","findOneAndUpdateAsync","$set","new","updateUser","send","message","data","addPassengerTrip","tripId","pickUpTime","passengerIds","length","status","code","TripSchema","tripData","updatePassenger","passengerId","map","passenger","id","removePassenger","resp","oldPassengerList","p","isDeleted","deletedAt","Date","toISOString","findAsync","riderId","$in","$and","tripStatus","$ne","uploadImage","cloudinary","config","cloud_name","api_key","api_secret","form","formidable","IncomingForm","on","console","error","parse","fields","files","imgpath","image","v2","uploader","upload","path","transformation","effect","gravity","height","radius","width","crop","quality","results","headers","updatetype","foundUser","profileUrl","url","success","returnObj"],"mappings":"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","file":"passenger.js","sourceRoot":"../../../../.."}