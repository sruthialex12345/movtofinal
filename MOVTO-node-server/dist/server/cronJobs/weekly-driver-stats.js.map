{"version":3,"sources":["server/cronJobs/weekly-driver-stats.js"],"names":["getPreviousWeekTrips","driverId","currenDate","Date","toISOString","prevMondayDate","subtract","prevSundayDate","TripSchema","aggregateAsync","$match","pickUpTime","$gte","$lte","$group","_id","totalUsers","$sum","totalFare","onArrivalRate","$cond","if","then","else","$divide","$multiply","cancellationRate","$eq","extremelyLateArrivals","$subtract","ridesCancelledLastMin","$and","tripData","length","console","log","emailDriverWeekly","User","findAsync","userType","USER_TYPE_DRIVER","isApproved","verified","driverData","forEach","element"],"mappings":"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","file":"weekly-driver-stats.js","sourceRoot":"../../../../.."}