{"version":3,"sources":["server/service/pushNotification.js"],"names":["FCM","require","fcm","config","serverKey","sendNotificationByUserIdAsync","userId","data","resolve","reject","console","log","UserSchema","findOneAsync","_id","then","userObj","loggedInDevices","sendToLoggedInDevices","map","device","message","to","token","notification","title","body","resolvefcm","rejectfcm","send","err","response","all","result","catch"],"mappings":";;;;;;;;;;;;;;;AACA;;;;AACA;;;;;;AAFA,IAAMA,MAAMC,QAAQ,UAAR,CAAZ;;;AAIA,IAAMC,MAAM,IAAIF,GAAJ,CAAQG,cAAOD,GAAP,CAAWE,SAAnB,CAAZ;;AAEO,IAAOC,wEAAgC,SAAhCA,6BAAgC,CAACC,MAAD,EAASC,IAAT,EAAiB;AAC7D;AACA,SAAO,sBAAY,UAACC,OAAD,EAAUC,MAAV,EAAmB;AACpCC,YAAQC,GAAR,CAAY,qBAAZ,EAAkCL,MAAlC;AACAM,mBAAWC,YAAX,CAAwB,EAAEC,KAAKR,MAAP,EAAxB,EAAyCS,IAAzC,CAA8C,mBAAW;AACtDL,cAAQC,GAAR,CAAY,yBAAZ,EAAuC,yBAAeK,QAAQC,eAAvB,CAAvC;AACC;AACEP,cAAQC,GAAR,CAAY,cAAZ,EAA2BL,MAA3B;AACA;;AAEA,UAAIY,wBAAwBF,QAAQC,eAAR,CAAwBE,GAAxB,CAA4B,UAACC,MAAD,EAAU;AAC/D,YAAIC,UAAU;AACZC,cAAIF,OAAOG,KADC;AAEZ;;AAEAC,wBAAc;AACZC,mBAAOlB,KAAKkB,KADA,EACO;AACnBC,kBAAMnB,KAAKmB,IAFC,CAEI;AAFJ,WAJF;;AASZnB,gBAAM,EAAG;AACPkB,mBAAOlB,KAAKkB,KADR;AAEJC,kBAAMnB,KAAKmB;AAFP;AATM,SAAd;AAcA,eAAO,sBAAY,UAACC,UAAD,EAAaC,SAAb,EAAyB;AAC1C1B,cAAI2B,IAAJ,CAASR,OAAT,EAAkB,UAASS,GAAT,EAAcC,QAAd,EAAuB;AACvC,gBAAID,GAAJ,EAAS;AACPpB,sBAAQC,GAAR,CAAY,2BAAZ,EAAyCmB,GAAzC;AACA,qBAAOF,UAAUE,GAAV,CAAP;AACD,aAHD,MAGO;AACLpB,sBAAQC,GAAR,CAAY,mCAAZ,EAAiDoB,QAAjD;AACA,qBAAOJ,WAAWI,QAAX,CAAP;AACD;AACF,WARD;AASD,SAVM,CAAP;AAWD,OA1B0B,CAA5B;;AA4BC;AACA,wBAAQC,GAAR,CAAYd,qBAAZ,EACCH,IADD,CACM,UAACkB,MAAD,EAAU;AACd,eAAOzB,QAAQyB,MAAR,CAAP;AACD,OAHD,EAICC,KAJD,CAIO,UAACJ,GAAD,EAAO;AACZ,eAAOrB,OAAOqB,GAAP,CAAP;AACD,OAND;;AAQD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CL,KArFD,EAqFGI,KArFH,CAqFS,eAAK;AACZ,aAAOzB,OAAOqB,GAAP,CAAP;AACD,KAvFD;AAwFD,GA1FM,CAAP;AA2FD,CA7FM","file":"pushNotification.js","sourceRoot":"../../../../.."}